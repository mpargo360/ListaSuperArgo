<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Lista de Compras ARGO</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #f5f5f5;
    color: #333;
    margin: 0;
    padding: 0 0 80px 0;
  }

  h1 {
    text-align: center;
    margin-top: 40px;
    margin-bottom: 10px;
    font-size: 1.8em;
  }

  .button-bar {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
  }

  button {
    border: 1px solid #0078d7;
    background-color: white;
    color: #0078d7;
    border-radius: 8px;
    padding: 6px 12px;
    font-size: 0.9em;
    cursor: pointer;
  }

  button:hover {
    background-color: #0078d7;
    color: white;
  }

  .category {
    background-color: white;
    border-radius: 12px;
    margin: 10px 15px;
    padding: 10px 12px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  .category h2 {
    margin: 0 0 10px 0;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 1.1em;
  }

  .item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #e0e0e0;
  }

  .item:last-child {
    border-bottom: none;
  }

  .item-left {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .qty {
    width: 22px;
    text-align: center;
    font-weight: bold;
  }

  .controls {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .controls button {
    border: 1px solid #ccc;
    background: #fafafa;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    font-size: 1em;
    font-weight: bold;
  }

  .delete-btn {
    color: red;
    font-size: 1.2em;
    display: none;
  }

  .edit-mode .delete-btn {
    display: inline;
  }

  .modal {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background: white;
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    width: 80%;
    max-width: 300px;
  }

  .modal-content button {
    margin-top: 10px;
  }

  .footer-space {
    height: 100px;
  }

  #newItemCategory {
    display: block;
    width: 100%;
    margin-top: 8px;
    padding: 6px;
  }
</style>
</head>
<body>
  <h1>Lista de Compras ARGO</h1>

  <div class="button-bar">
    <button id="editBtn">‚úèÔ∏è Editar</button>
    <button id="clearBtn">üóëÔ∏è Vaciar lista</button>
    <button id="shareBtn">üì§ Compartir</button>
    <button id="copyBtn">üìã Copiar</button>
  </div>

  <div id="list"></div>
  <div class="footer-space"></div>

  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <h3>¬øVaciar toda la lista?</h3>
      <button id="confirmYes">S√≠, vaciar</button>
      <button id="confirmNo">Cancelar</button>
    </div>
  </div>

<script>
const defaultList = {
  "Heladera": [
    { name: "Leche", ideal: 3 },
    { name: "Manteca", ideal: 1 }
  ],
  "Despensa": [
    { name: "Az√∫car", ideal: 2 },
    { name: "Aceite", ideal: 1 },
    { name: "Sal fina", ideal: 1 },
    { name: "Sal gruesa", ideal: 1 },
    { name: "Vinagre", ideal: 1 },
    { name: "Aceite de oliva", ideal: 1 },
    { name: "Yerba Playadito", ideal: 1 },
    { name: "Yerba Tarag√ºi", ideal: 1 },
    { name: "Edulcorante", ideal: 1 }
  ],
  "Aderezos": [
    { name: "Mayonesa", ideal: 1 },
    { name: "Mostaza", ideal: 1 },
    { name: "Ketchup", ideal: 1 },
    { name: "Chimichurri", ideal: 1 }
  ],
  "Desayuno y galletas": [
    { name: "Caf√© instant√°neo Dolca", ideal: 2 },
    { name: "Caf√© molido tostado", ideal: 3 },
    { name: "Caf√© en c√°psula (caja)", ideal: 2 },
    { name: "T√© com√∫n (100un)", ideal: 1 },
    { name: "T√© boldo (25)", ideal: 1 },
    { name: "T√© manzanilla (25)", ideal: 1 },
    { name: "Mate cocido (25un)", ideal: 1 },
    { name: "9 de oro agridulce", ideal: 3 },
    { name: "Galletas surtidas", ideal: 2 },
    { name: "Galleta de agua", ideal: 3 }
  ],
  "Limpieza": [
    { name: "Jab√≥n", ideal: 6 },
    { name: "Esponja de cocina", ideal: 3 },
    { name: "Virulana de algod√≥n", ideal: 3 },
    { name: "Papel de cocina", ideal: 6 },
    { name: "Papel higi√©nico", ideal: 12 }
  ],
  "Otros": [
    { name: "F√≥sforos", ideal: 1 },
    { name: "Escarbadientes", ideal: 1 }
  ]
};

let list = JSON.parse(localStorage.getItem("shoppingListARGO")) || defaultList;
let editMode = false;

const listDiv = document.getElementById("list");
const confirmModal = document.getElementById("confirmModal");

function renderList() {
  listDiv.innerHTML = "";
  Object.entries(list).forEach(([category, items]) => {
    const section = document.createElement("div");
    section.className = "category";
    section.innerHTML = `<h2>üß∫ ${category}</h2>`;
    items.forEach((item, i) => {
      const need = Math.max(item.ideal - (item.have || 0), 0);
      const row = document.createElement("div");
      row.className = "item";
      row.innerHTML = `
        <div class="item-left">
          <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" width="20">
          <span class="qty">${need}</span>
          <span>${item.name}</span>
        </div>
        <div class="controls">
          <button onclick="changeQty('${category}',${i},-1)">-</button>
          <span>${item.have || 0}</span>
          <button onclick="changeQty('${category}',${i},1)">+</button>
          <span class="delete-btn" onclick="deleteItem('${category}',${i})">‚úñÔ∏è</span>
        </div>`;
      section.appendChild(row);
    });
    listDiv.appendChild(section);
  });
}

function changeQty(cat, i, d) {
  list[cat][i].have = Math.max(0, (list[cat][i].have || 0) + d);
  saveList();
}

function deleteItem(cat, i) {
  const modal = document.createElement("div");
  modal.className = "modal";
  modal.style.display = "flex";
  modal.innerHTML = `
    <div class="modal-content">
      <h3>¬øEliminar "${list[cat][i].name}"?</h3>
      <button id="yes">Eliminar</button>
      <button id="no">Cancelar</button>
    </div>`;
  document.body.appendChild(modal);
  modal.querySelector("#yes").onclick = () => {
    list[cat].splice(i, 1);
    saveList();
    document.body.removeChild(modal);
  };
  modal.querySelector("#no").onclick = () => {
    document.body.removeChild(modal);
  };
}

function saveList() {
  localStorage.setItem("shoppingListARGO", JSON.stringify(list));
  renderList();
}

document.getElementById("editBtn").onclick = () => {
  editMode = !editMode;
  document.body.classList.toggle("edit-mode", editMode);
};

document.getElementById("clearBtn").onclick = () => {
  confirmModal.style.display = "flex";
};
document.getElementById("confirmYes").onclick = () => {
  list = JSON.parse(JSON.stringify(defaultList));
  saveList();
  confirmModal.style.display = "none";
};
document.getElementById("confirmNo").onclick = () => {
  confirmModal.style.display = "none";
};

document.getElementById("shareBtn").onclick = () => {
  const text = buildText();
  const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
  window.open(url, "_blank");
};
document.getElementById("copyBtn").onclick = () => {
  navigator.clipboard.writeText(buildText());
};

function buildText() {
  let t = "üõí Lista de Compras ARGO:\n\n";
  Object.entries(list).forEach(([cat, items]) => {
    t += `üì¶ ${cat}:\n`;
    items.forEach(i => {
      const need = Math.max(i.ideal - (i.have || 0), 0);
      t += ` - ${i.name}: comprar ${need}\n`;
    });
    t += "\n";
  });
  return t;
}

renderList();
</script>
</body>
</html>
